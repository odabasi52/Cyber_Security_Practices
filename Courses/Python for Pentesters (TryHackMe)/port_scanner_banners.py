
import socket 
import threading 
import time 

host_ip = "216.58.212.46"
def scan_port(port): 
    try: 
        s = socket.socket(socket.AF_INET, socket.SOCK_STREAM) 
  
        s.connect((host_ip, port)) 
        try: 
            banner = s.recv(1024).decode() 
            print("port {} is open with banner {}".format(port, banner)) 
  
        except: 
            print("port {} is open ".format(port)) 
  
    except: 
        pass
  
  
start_time = time.time() 
  
for i in range(0, 65536): 
    thread = threading.Thread(target=scan_port, args=[i]) 
    thread.start() 
  
end_time = time.time() 
print("To scan all ports it took {} seconds".format(end_time-start_time)) 